<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cligen/strUt</title>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css?v=2.3.1">

<!-- JS -->
<script type="text/javascript" src="../dochack.js?v=2.3.1"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">cligen/strUt</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="../theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#FloatCvtOptions" title="FloatCvtOptions = enum      ## The many options of binary -&gt; string float conversion.
  fcPad0,                   ## Pad with '0' to the right (based upon precision `p`)
  fcLead0,                  ## Fractions get a leading zero in fcvt's
  fcCapital,                ## Use E|INF|NAN not default e|inf|nan
  fcPlus,                   ## Leading '+' for positive numbers, not default &quot;&quot;
  fcTrailDot,               ## Trailing '.' for round integers (to signify &quot;FP&quot;)
  fcTrailDot0,              ## Trailing &quot;.0&quot; for round integers; overrides fcTrailDot
  fcExp23,                  ## 2|3 digit exp; 1e03 or 1e103 not 1e3; only for ecvt
  fcExp3,                   ## 3 digit exp; 1e003 not 1e3; only for ecvt
  fcExpPlus                  ## '+' on positive exponents; 1e+3 not 1e3; only for ecvt">FloatCvtOptions</a></li>
<li><a class="reference" href="#MacroCall" title="MacroCall = (Slice[int], Slice[int], Slice[int])">MacroCall</a></li>
<li><a class="reference" href="#MacroCallX" title="MacroCallX = (Slice[int], Slice[int], Slice[int], string)">MacroCallX</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#8" id="58">Vars</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#pmDfl" title="pmDfl = getEnv(&quot;LC_PM&quot;, &quot; +- &quot;)">pmDfl</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#10" id="60">Consts</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#alphaNum" title="alphaNum = {'a'..'z', 'A'..'Z', '_', '0'..'9', '\x80'..'\xFF'}">alphaNum</a></li>
<li><a class="reference" href="#pmUnicode" title="pmUnicode = &quot;Â±&quot;">pmUnicode</a></li>
<li><a class="reference" href="#pmUnicodeSpaced" title="pmUnicodeSpaced = &quot; Â± &quot;">pmUnicodeSpaced</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">-
  <li><a class="reference" href="#-%2CopenArray%5Bstring%5D%2CopenArray%5Bstring%5D" title="`-`(a, b: openArray[string]): seq[string]">`-`(a, b: openArray[string]): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">add
  <li><a class="reference" href="#add%2Cstring%2CopenArray%5Bchar%5D" title="add(result: var string; a: openArray[char])">add(result: var string; a: openArray[char])</a></li>

</ul>
<ul class="simple nested-toc-section">commentStrip
  <li><a class="reference" href="#commentStrip%2Cstring" title="commentStrip(s: string): string">commentStrip(s: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">ecvt
  <li><a class="reference" href="#ecvt%2Cstring%2Cfloat%2Cint" title="ecvt(s: var string; x: float; p = 17; opts = {fcPad0})">ecvt(s: var string; x: float; p = 17; opts = {fcPad0})</a></li>

</ul>
<ul class="simple nested-toc-section">ecvt2
  <li><a class="reference" href="#ecvt2%2Cstring%2Cstring%2Cfloat%2Cint%2Cbool%2Cint" title="ecvt2(man, exp: var string; x: float; p = 17; opts = {fcPad0};
      bumped: var bool = doNotUseB; expon: var int = doNotUseI)">ecvt2(man, exp: var string; x: float; p = 17; opts = {fcPad0};
      bumped: var bool = doNotUseB; expon: var int = doNotUseI)</a></li>

</ul>
<ul class="simple nested-toc-section">endsWithI
  <li><a class="reference" href="#endsWithI%2Cstring%2Cstring" title="endsWithI(s, suffix: string): bool">endsWithI(s, suffix: string): bool</a></li>

</ul>
<ul class="simple nested-toc-section">fcvt
  <li><a class="reference" href="#fcvt%2Cstring%2Cfloat%2Cint" title="fcvt(s: var string; x: float; p: int; opts = {fcPad0, fcLead0})">fcvt(s: var string; x: float; p: int; opts = {fcPad0, fcLead0})</a></li>

</ul>
<ul class="simple nested-toc-section">find
  <li><a class="reference" href="#find%2CopenArray%5Bchar%5D%2Cchar%2CNatural%2Cint" title="find(s: openArray[char]; sub: char; start: Natural = 0; last = 0): int">find(s: openArray[char]; sub: char; start: Natural = 0; last = 0): int</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertain
  <li><a class="reference" href="#fmtUncertain%2Cfloat%2Cfloat%2Cint" title="fmtUncertain(val, err: float; fmt0 = fmtUncertain0; fmtE = fmtUncertainE;
             e0 = -2 .. 4; sigDigs = 2): string">fmtUncertain(val, err: float; fmt0 = fmtUncertain0; fmtE = fmtUncertainE;
             e0 = -2 .. 4; sigDigs = 2): string</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainMerged
  <li><a class="reference" href="#fmtUncertainMerged%2Cfloat%2Cfloat%2Cint" title="fmtUncertainMerged(val, err: float; sigDigs = 2; e0 = -2 .. 4): string">fmtUncertainMerged(val, err: float; sigDigs = 2; e0 = -2 .. 4): string</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainMergedSci
  <li><a class="reference" href="#fmtUncertainMergedSci%2Cfloat%2Cfloat%2Cint" title="fmtUncertainMergedSci(val, err: float; sigDigs = 2): string">fmtUncertainMergedSci(val, err: float; sigDigs = 2): string</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainParts
  <li><a class="reference" href="#fmtUncertainParts%2Cfloat%2Cfloat%2Cint" title="fmtUncertainParts(val, err: float; sigDigs = 2): (string, string, string,
    string, int)">fmtUncertainParts(val, err: float; sigDigs = 2): (string, string, string,
    string, int)</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainRender
  <li><a class="reference" href="#fmtUncertainRender%2Cfloat%2Cfloat%2Cstring%2Cstring%2Cseq%5BMacroCall%5D%2Cseq%5BMacroCall%5D%2Cint" title="fmtUncertainRender(val, err: float; fmt0, fmtE: string;
                   parse0, parseE: seq[MacroCall]; e0 = -2 .. 4; sigDigs = 2): string">fmtUncertainRender(val, err: float; fmt0, fmtE: string;
                   parse0, parseE: seq[MacroCall]; e0 = -2 .. 4; sigDigs = 2): string</a></li>
<li><a class="reference" href="#fmtUncertainRender%2Cstring%2Cstring%2Cstring%2Cstring%2Cint%2Cstring%2Cseq%5BMacroCall%5D" title="fmtUncertainRender(vm, ve, um, ue: string; exp: int; fmt: string;
                   parse: seq[MacroCall]): string">fmtUncertainRender(vm, ve, um, ue: string; exp: int; fmt: string;
                   parse: seq[MacroCall]): string</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainSci
  <li><a class="reference" href="#fmtUncertainSci%2Cfloat%2Cfloat%2Cint" title="fmtUncertainSci(val, err: float; sigDigs = 2): string">fmtUncertainSci(val, err: float; sigDigs = 2): string</a></li>

</ul>
<ul class="simple nested-toc-section">fmtUncertainVal
  <li><a class="reference" href="#fmtUncertainVal%2Cfloat%2Cfloat%2Cint" title="fmtUncertainVal(val, err: float; sigDigs = 2; e0 = -2 .. 4): string">fmtUncertainVal(val, err: float; sigDigs = 2; e0 = -2 .. 4): string</a></li>

</ul>
<ul class="simple nested-toc-section">hashCB
  <li><a class="reference" href="#hashCB%2CopenArray%5Bchar%5D" title="hashCB(x: openArray[char]): uint64">hashCB(x: openArray[char]): uint64</a></li>

</ul>
<ul class="simple nested-toc-section">hashWY
  <li><a class="reference" href="#hashWY%2CopenArray%5Bchar%5D" title="hashWY(x: openArray[char]): uint64">hashWY(x: openArray[char]): uint64</a></li>

</ul>
<ul class="simple nested-toc-section">idIsLiteral
  <li><a class="reference" href="#idIsLiteral%2CSlice%5Bint%5D" title="idIsLiteral(id: Slice[int]): bool">idIsLiteral(id: Slice[int]): bool</a></li>

</ul>
<ul class="simple nested-toc-section">joins
  <li><a class="reference" href="#joins%2Cseq%5Bseq%5BT%5D%5D%2CT" title="joins[T](sst: seq[seq[T]]; delim: T): seq[T]">joins[T](sst: seq[seq[T]]; delim: T): seq[T]</a></li>

</ul>
<ul class="simple nested-toc-section">joinS
  <li><a class="reference" href="#joinS%2Cstring%2Cvarargs%5Bstring%2C%5D" title="joinS(sep = &quot; &quot;; a: varargs[string, `$`]): string">joinS(sep = &quot; &quot;; a: varargs[string, `$`]): string</a></li>

</ul>
<ul class="simple nested-toc-section">nearUnity4
  <li><a class="reference" href="#nearUnity4%2Cfloat" title="nearUnity4(f: float): string">nearUnity4(f: float): string</a></li>

</ul>
<ul class="simple nested-toc-section">split
  <li><a class="reference" href="#split%2Cseq%5BT%5D%2CT" title="split[T](st: seq[T]; delim: T): seq[seq[T]]">split[T](st: seq[T]; delim: T): seq[seq[T]]</a></li>

</ul>
<ul class="simple nested-toc-section">startsWithI
  <li><a class="reference" href="#startsWithI%2Cstring%2Cstring" title="startsWithI(s, prefix: string): bool">startsWithI(s, prefix: string): bool</a></li>

</ul>
<ul class="simple nested-toc-section">tmplParsed
  <li><a class="reference" href="#tmplParsed%2CopenArray%5Bchar%5D%2Cchar" title="tmplParsed(fmt: openArray[char]; meta = '$'; ids = alphaNum): seq[MacroCall]">tmplParsed(fmt: openArray[char]; meta = '$'; ids = alphaNum): seq[MacroCall]</a></li>

</ul>
<ul class="simple nested-toc-section">tmplParses
  <li><a class="reference" href="#tmplParses%2CopenArray%5Bchar%5D%2Cchar" title="tmplParses(fmt: openArray[char]; meta = '$'; ids = alphaNum): seq[MacroCallX]">tmplParses(fmt: openArray[char]; meta = '$'; ids = alphaNum): seq[MacroCallX]</a></li>

</ul>
<ul class="simple nested-toc-section">toString
  <li><a class="reference" href="#toString%2CopenArray%5Bchar%5D" title="toString(s: openArray[char]): string">toString(s: openArray[char]): string</a></li>

</ul>
<ul class="simple nested-toc-section">uint64toDecimal
  <li><a class="reference" href="#uint64toDecimal%2CopenArray%5Bchar%5D%2Cuint64" title="uint64toDecimal(res: var openArray[char]; x: uint64): int">uint64toDecimal(res: var openArray[char]; x: uint64): int</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#15" id="65">Iterators</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">tmplParse
  <li><a class="reference" href="#tmplParse.i%2CopenArray%5Bchar%5D%2Cchar" title="tmplParse(fmt: openArray[char]; meta = '$'; ids = alphaNum): MacroCall">tmplParse(fmt: openArray[char]; meta = '$'; ids = alphaNum): MacroCall</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    
    <div id="tocRoot"></div>
    
    <p class="module-desc">This is a portability shim include file for when you want code to work without deprecation warnings under younger &amp; older Nim compilers.  Just <tt class="docutils literal"><span class="pre"><span class="Keyword">include</span> <span class="Identifier">cligen</span><span class="Operator">/</span><span class="Identifier">unsafeAdr</span></span></tt> at the global scope before using unsafeAddr.DragonBox is fast &amp; accurate but sadly has no output format flexibility. Someday that may improve.  For now the below routines maintain speed but fill the flexibility gap at a tiny loss of accuracy.  This is not so bad if your mindset is that output (&amp;parsing) is just another calculation on floats like transcendentals.  1 ULP is often considered ok for those.  Rel.err. &lt; ~2^-52 for me.  Binary|C99 hex float are cheaper marshaling &amp; Javascript should just learn C99 hex floats already, especially since every number is <tt class="docutils literal"><span class="pre"><span class="Identifier">float</span></span></tt>! <tt class="docutils literal"><span class="pre"><span class="Identifier">ecvt</span></span></tt>/<tt class="docutils literal"><span class="pre"><span class="Identifier">fcvt</span></span></tt> can be ~2X faster than DragonBox when asking for rounded results/fewer digits which for me is a common case.</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="mslice.html">mslice</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="FloatCvtOptions">
  <dt><pre><a href="strUt.html#FloatCvtOptions"><span class="Identifier">FloatCvtOptions</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>      <span class="Comment">## The many options of binary -&gt; string float conversion.</span>
  <span class="Identifier">fcPad0</span><span class="Other">,</span>                   <span class="Comment">## Pad with '0' to the right (based upon precision `p`)</span>
  <span class="Identifier">fcLead0</span><span class="Other">,</span>                  <span class="Comment">## Fractions get a leading zero in fcvt's</span>
  <span class="Identifier">fcCapital</span><span class="Other">,</span>                <span class="Comment">## Use E|INF|NAN not default e|inf|nan</span>
  <span class="Identifier">fcPlus</span><span class="Other">,</span>                   <span class="Comment">## Leading '+' for positive numbers, not default &quot;&quot;</span>
  <span class="Identifier">fcTrailDot</span><span class="Other">,</span>               <span class="Comment">## Trailing '.' for round integers (to signify &quot;FP&quot;)</span>
  <span class="Identifier">fcTrailDot0</span><span class="Other">,</span>              <span class="Comment">## Trailing &quot;.0&quot; for round integers; overrides fcTrailDot</span>
  <span class="Identifier">fcExp23</span><span class="Other">,</span>                  <span class="Comment">## 2|3 digit exp; 1e03 or 1e103 not 1e3; only for ecvt</span>
  <span class="Identifier">fcExp3</span><span class="Other">,</span>                   <span class="Comment">## 3 digit exp; 1e003 not 1e3; only for ecvt</span>
  <span class="Identifier">fcExpPlus</span>                  <span class="Comment">## '+' on positive exponents; 1e+3 not 1e3; only for ecvt</span></pre></dt>
  <dd>
    
    The many options of binary -&gt; string float conversion.
    
  </dd>
</div>
<div id="MacroCall">
  <dt><pre><a href="strUt.html#MacroCall"><span class="Identifier">MacroCall</span></a> <span class="Other">=</span> <span class="Other">(</span><span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    Id, Arg, whole Call
    
  </dd>
</div>
<div id="MacroCallX">
  <dt><pre><a href="strUt.html#MacroCallX"><span class="Identifier">MacroCallX</span></a> <span class="Other">=</span> <span class="Other">(</span><span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">string</span><span class="Other">)</span></pre></dt>
  <dd>
    
    Call &amp; string
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="8">
  <h1><a class="toc-backref" href="#8">Vars</a></h1>
  <dl class="item">
    <div id="pmDfl">
  <dt><pre><a href="strUt.html#pmDfl"><span class="Identifier">pmDfl</span></a> <span class="Other">=</span> <span class="Identifier">getEnv</span><span class="Other">(</span><span class="StringLit">&quot;LC_PM&quot;</span><span class="Other">,</span> <span class="StringLit">&quot; +- &quot;</span><span class="Other">)</span></pre></dt>
  <dd>
    
    how plus|minus is spelled
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="10">
  <h1><a class="toc-backref" href="#10">Consts</a></h1>
  <dl class="item">
    <div id="alphaNum">
  <dt><pre><a href="strUt.html#alphaNum"><span class="Identifier">alphaNum</span></a> <span class="Other">=</span> <span class="Other">{</span><span class="CharLit">'a'</span><span class="Other">..</span><span class="CharLit">'z'</span><span class="Other">,</span> <span class="CharLit">'A'</span><span class="Other">..</span><span class="CharLit">'Z'</span><span class="Other">,</span> <span class="CharLit">'_'</span><span class="Other">,</span> <span class="CharLit">'0'</span><span class="Other">..</span><span class="CharLit">'9'</span><span class="Other">,</span> <span class="CharLit">'\x80'</span><span class="Other">..</span><span class="CharLit">'\xFF'</span><span class="Other">}</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="pmUnicode">
  <dt><pre><a href="strUt.html#pmUnicode"><span class="Identifier">pmUnicode</span></a> <span class="Other">=</span> <span class="StringLit">&quot;Â±&quot;</span></pre></dt>
  <dd>
    
    for re-assign/param passing ease
    
  </dd>
</div>
<div id="pmUnicodeSpaced">
  <dt><pre><a href="strUt.html#pmUnicodeSpaced"><span class="Identifier">pmUnicodeSpaced</span></a> <span class="Other">=</span> <span class="StringLit">&quot; Â± &quot;</span></pre></dt>
  <dd>
    
    for re-assign/param passing ease
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="--procs-all">
  <div id="-,openArray[string],openArray[string]">
  <dt><pre><span class="Keyword">proc</span> <a href="#-%2CopenArray%5Bstring%5D%2CopenArray%5Bstring%5D"><span class="Identifier">`-`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    All <tt class="docutils literal"><span class="pre"><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Identifier">s</span></span></tt> not in b (implemented efficiently with a HashSet).
    
  </dd>
</div>

</div>
<div id="add-procs-all">
  <div id="add,string,openArray[char]">
  <dt><pre><span class="Keyword">proc</span> <a href="#add%2Cstring%2CopenArray%5Bchar%5D"><span class="Identifier">add</span></a><span class="Other">(</span><span class="Identifier">result</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="commentStrip-procs-all">
  <div id="commentStrip,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#commentStrip%2Cstring"><span class="Identifier">commentStrip</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    return string with any pre-'#' whitespace and any post-'#' text removed.
    
  </dd>
</div>

</div>
<div id="ecvt-procs-all">
  <div id="ecvt,string,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#ecvt%2Cstring%2Cfloat%2Cint"><span class="Identifier">ecvt</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">p</span> <span class="Other">=</span> <span class="DecNumber">17</span><span class="Other">;</span> <span class="Identifier">opts</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">fcPad0</span><span class="Other">}</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    ANSI C/Unix ecvt: float -&gt; D.PPPPe+EE; Most conversion in int arithmetic. Accurate to ~52 bits with p=17.
    
  </dd>
</div>

</div>
<div id="ecvt2-procs-all">
  <div id="ecvt2,string,string,float,int,bool,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#ecvt2%2Cstring%2Cstring%2Cfloat%2Cint%2Cbool%2Cint"><span class="Identifier">ecvt2</span></a><span class="Other">(</span><span class="Identifier">man</span><span class="Other">,</span> <span class="Identifier">exp</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">p</span> <span class="Other">=</span> <span class="DecNumber">17</span><span class="Other">;</span> <span class="Identifier">opts</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">fcPad0</span><span class="Other">}</span><span class="Other">;</span>
           <span class="Identifier">bumped</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">doNotUseB</span><span class="Other">;</span> <span class="Identifier">expon</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="Identifier">doNotUseI</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    ANSI C/Unix ecvt: float -&gt; D.PPPPe+EE; Most conversion in int arithmetic. Accurate to ~52 bits with p=17.
    
  </dd>
</div>

</div>
<div id="endsWithI-procs-all">
  <div id="endsWithI,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#endsWithI%2Cstring%2Cstring"><span class="Identifier">endsWithI</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">,</span> <span class="Identifier">suffix</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">noSideEffect</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Case insensitive variant of endsWith.
    
  </dd>
</div>

</div>
<div id="fcvt-procs-all">
  <div id="fcvt,string,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fcvt%2Cstring%2Cfloat%2Cint"><span class="Identifier">fcvt</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">p</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">opts</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">fcPad0</span><span class="Other">,</span> <span class="Identifier">fcLead0</span><span class="Other">}</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    ANSI C/Unix fcvt: float -&gt; DDD.PPPP; Most conversion in integer arithmetic. Accurate to ~52 bits with p=17.
    
  </dd>
</div>

</div>
<div id="find-procs-all">
  <div id="find,openArray[char],char,Natural,int">
  <dt><pre><span class="Keyword">func</span> <a href="#find%2CopenArray%5Bchar%5D%2Cchar%2CNatural%2Cint"><span class="Identifier">find</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">sub</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">;</span> <span class="Identifier">start</span><span class="Other">:</span> <span class="Identifier">Natural</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">;</span> <span class="Identifier">last</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="fmtUncertain-procs-all">
  <div id="fmtUncertain,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertain%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertain</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">fmt0</span> <span class="Other">=</span> <span class="Identifier">fmtUncertain0</span><span class="Other">;</span> <span class="Identifier">fmtE</span> <span class="Other">=</span> <span class="Identifier">fmtUncertainE</span><span class="Other">;</span>
                  <span class="Identifier">e0</span> <span class="Other">=</span> <span class="DecNumber">-2</span> <span class="Operator">..</span> <span class="DecNumber">4</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Driver for <tt class="docutils literal"><span class="pre"><span class="Identifier">fmtUncertainRender</span></span></tt> which can do most desired formats.
    
  </dd>
</div>

</div>
<div id="fmtUncertainMerged-procs-all">
  <div id="fmtUncertainMerged,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainMerged%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertainMerged</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">;</span> <span class="Identifier">e0</span> <span class="Other">=</span> <span class="DecNumber">-2</span> <span class="Operator">..</span> <span class="DecNumber">4</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">fmtUncertainMergedSci</span></span></tt> w/digit shift not e+NN for exp range near 0, <tt class="docutils literal"><span class="pre"><span class="Identifier">e0</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="fmtUncertainMergedSci-procs-all">
  <div id="fmtUncertainMergedSci,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainMergedSci%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertainMergedSci</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Format in &quot;Particle Data Group&quot; Style with uncertainty digits merged after the value and always in scientific-notation: val(err)e+NN with <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt> of error digits.  E.g. &quot;12.34... +- 0.56...&quot; =&gt; &quot;1.234(56)e+01&quot; (w/sigDigs=2).
    
  </dd>
</div>

</div>
<div id="fmtUncertainParts-procs-all">
  <div id="fmtUncertainParts,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainParts%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertainParts</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">string</span><span class="Other">,</span>
    <span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    This is a helper for nice formats.  ffScientific format <tt class="docutils literal"><span class="pre"><span class="Identifier">err</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt>. Then fmt <tt class="docutils literal"><span class="pre"><span class="Identifier">val</span></span></tt> so that the final decimal place of both <em>always</em> aligns. Eg., (3141.5.., 45.6..) =&gt; (&quot;3.142&quot;, &quot;e+03&quot;, &quot;4.6&quot;, &quot;e+01&quot;).  Alignment means the difference in exponents should always be <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt>.  <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span><span class="Operator">=</span><span class="DecNumber">2</span></span></tt> as per ISO standard JCGM 100:2008(E) $7.2.6 specific guidance available at: <a class="reference external" href="https://www.bipm.org/en/committees/jc/jcgm/publications">https://www.bipm.org/en/committees/jc/jcgm/publications</a> (E)
    
  </dd>
</div>

</div>
<div id="fmtUncertainRender-procs-all">
  <div id="fmtUncertainRender,float,float,string,string,seq[MacroCall],seq[MacroCall],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainRender%2Cfloat%2Cfloat%2Cstring%2Cstring%2Cseq%5BMacroCall%5D%2Cseq%5BMacroCall%5D%2Cint"><span class="Identifier">fmtUncertainRender</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">fmt0</span><span class="Other">,</span> <span class="Identifier">fmtE</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span>
                        <span class="Identifier">parse0</span><span class="Other">,</span> <span class="Identifier">parseE</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="strUt.html#MacroCall"><span class="Identifier">MacroCall</span></a><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">e0</span> <span class="Other">=</span> <span class="DecNumber">-2</span> <span class="Operator">..</span> <span class="DecNumber">4</span><span class="Other">;</span>
                        <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Co-round <tt class="docutils literal"><span class="pre"><span class="Identifier">val</span></span></tt> &amp; <tt class="docutils literal"><span class="pre"><span class="Identifier">err</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt> of <tt class="docutils literal"><span class="pre"><span class="Identifier">err</span></span></tt>; <tt class="docutils literal"><span class="pre"><span class="Identifier">fmtUncertainRender</span></span></tt> with <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt0</span></span></tt> for valExp in exponent range near the origin, <tt class="docutils literal"><span class="pre"><span class="Identifier">e0</span></span></tt>, else <tt class="docutils literal"><span class="pre"><span class="Identifier">fmtE</span></span></tt>.
    
  </dd>
</div>
<div id="fmtUncertainRender,string,string,string,string,int,string,seq[MacroCall]">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainRender%2Cstring%2Cstring%2Cstring%2Cstring%2Cint%2Cstring%2Cseq%5BMacroCall%5D"><span class="Identifier">fmtUncertainRender</span></a><span class="Other">(</span><span class="Identifier">vm</span><span class="Other">,</span> <span class="Identifier">ve</span><span class="Other">,</span> <span class="Identifier">um</span><span class="Other">,</span> <span class="Identifier">ue</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">exp</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span>
                        <span class="Identifier">parse</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="strUt.html#MacroCall"><span class="Identifier">MacroCall</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Expand interpolates:<ul class="simple"><li>valMan valExp errMan errExp: val &amp; err rounded to sigDigs places of err.</li>
<li>val0 err0: val &amp; err with decimal mantissas shifted such that expon==0</li>
<li>errV: err shifted so decimal aligns with val0</li>
<li>errD: unpunctuated <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt> digits of err</li>
<li>pm: a single <tt class="docutils literal"><span class="pre"><span class="Identifier">strUt</span><span class="Operator">.</span><span class="Identifier">pmDfl</span></span></tt>. You can change from &quot;+-&quot; to pmUnicode('Â±').</li>
</ul>

    
  </dd>
</div>

</div>
<div id="fmtUncertainSci-procs-all">
  <div id="fmtUncertainSci,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainSci%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertainSci</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Format co-rounded (val${pm}err)e+NN with err to <tt class="docutils literal"><span class="pre"><span class="Identifier">sigDigs</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="fmtUncertainVal-procs-all">
  <div id="fmtUncertainVal,float,float,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fmtUncertainVal%2Cfloat%2Cfloat%2Cint"><span class="Identifier">fmtUncertainVal</span></a><span class="Other">(</span><span class="Identifier">val</span><span class="Other">,</span> <span class="Identifier">err</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">sigDigs</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">;</span> <span class="Identifier">e0</span> <span class="Other">=</span> <span class="DecNumber">-2</span> <span class="Operator">..</span> <span class="DecNumber">4</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Format like <tt class="docutils literal"><span class="pre"><span class="Identifier">fmtUncertain</span></span></tt> default, but only the value part.
    
  </dd>
</div>

</div>
<div id="hashCB-procs-all">
  <div id="hashCB,openArray[char]">
  <dt><pre><span class="Keyword">proc</span> <a href="#hashCB%2CopenArray%5Bchar%5D"><span class="Identifier">hashCB</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint64</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Hash inspired by Fletcher1982-Arithmetic Checksum. Please credit him&amp;me! I adapted to use salt, 8B digits (filled native-Endian) &amp; accumulators truncated via unsigned long overflow, and R=3 (in paper's terminology). This passes few SMHasher tests, but is ok in practice, fast &amp; portable.
    
  </dd>
</div>

</div>
<div id="hashWY-procs-all">
  <div id="hashWY,openArray[char]">
  <dt><pre><span class="Keyword">proc</span> <a href="#hashWY%2CopenArray%5Bchar%5D"><span class="Identifier">hashWY</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint64</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Wang Yi's nice hash passing SMHasher tests; <em>Unoptimized</em> for small keys
    
  </dd>
</div>

</div>
<div id="idIsLiteral-procs-all">
  <div id="idIsLiteral,Slice[int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#idIsLiteral%2CSlice%5Bint%5D"><span class="Identifier">idIsLiteral</span></a><span class="Other">(</span><span class="Identifier">id</span><span class="Other">:</span> <span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Test if a <tt class="docutils literal"><span class="pre"><span class="Identifier">MacroCall</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span></span></tt> (<tt class="docutils literal"><span class="pre"><span class="Identifier">id</span></span></tt>) refers to a literal text &quot;call&quot;.
    
  </dd>
</div>

</div>
<div id="joins-procs-all">
  <div id="joins,seq[seq[T]],T">
  <dt><pre><span class="Keyword">proc</span> <a href="#joins%2Cseq%5Bseq%5BT%5D%5D%2CT"><span class="Identifier">joins</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">sst</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">delim</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Return joined seq of sub-seqs splittable by <tt class="docutils literal"><span class="pre">delim</span></tt>. E.g. <tt class="docutils literal"><span class="pre">@[@[&quot;a&quot;], @[&quot;b&quot;, &quot;c&quot;]].joins(&quot;--&quot;) == @[&quot;a&quot;, &quot;--&quot;, &quot;b&quot;, &quot;c&quot;].</span></tt>
    
  </dd>
</div>

</div>
<div id="joinS-procs-all">
  <div id="joinS,string,varargs[string,]">
  <dt><pre><span class="Keyword">proc</span> <a href="#joinS%2Cstring%2Cvarargs%5Bstring%2C%5D"><span class="Identifier">joinS</span></a><span class="Other">(</span><span class="Identifier">sep</span> <span class="Other">=</span> <span class="StringLit">&quot; &quot;</span><span class="Other">;</span> <span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Join after <tt class="docutils literal"><span class="pre"><span class="Operator">$</span></span></tt>.  <tt class="docutils literal"><span class="pre"><span class="Identifier">S</span></span></tt> is intended to suggest <tt class="docutils literal"><span class="pre"><span class="Operator">$</span></span></tt>. <tt class="docutils literal"><span class="pre"><span class="Identifier">echo</span> <span class="StringLit">&quot; &quot;</span><span class="Operator">.</span><span class="Identifier">joinS</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">,</span> <span class="Identifier">c</span><span class="Punctuation">)</span></span></tt> is more ceremony than <tt class="docutils literal"><span class="pre"><span class="Identifier">print</span></span></tt> but may also have broader utility.
    
  </dd>
</div>

</div>
<div id="nearUnity4-procs-all">
  <div id="nearUnity4,float">
  <dt><pre><span class="Keyword">proc</span> <a href="#nearUnity4%2Cfloat"><span class="Identifier">nearUnity4</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">cligen</span><span class="Operator">/</span><span class="Identifier">humanUt</span><span class="Operator">.</span><span class="Identifier">humanReadable4</span></span></tt> is nice for high dynamic range numbers where 3 order-of-magnitude metric banks are ok, but sometimes numbers parsing as floats is nice (%CPU, sort -g, a calculator, ..).  This proc can help then.  It formats positive floats with as much accuracy as 4 terminal cols allow (with f&lt;0 using 1 more column) - enough for many situations.  It uses, as appropriate, fmts: 0 De-N .DDD D.DD DD.D DDDD DDeN DeNN inf.  One figure repr range is 9e99/1e-9=9e108, ~109 OOMs, &gt;=2 figs for .01..99e9 &amp; 3..4 figs near 1 (hence the name).  (<tt class="docutils literal"><span class="pre"><span class="Identifier">strutils</span><span class="Operator">.</span><span class="Identifier">alignLeft</span></span></tt> right pads w/0.)
    
  </dd>
</div>

</div>
<div id="split-procs-all">
  <div id="split,seq[T],T">
  <dt><pre><span class="Keyword">proc</span> <a href="#split%2Cseq%5BT%5D%2CT"><span class="Identifier">split</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">st</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">delim</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Return seq of sub-seqs split by <tt class="docutils literal"><span class="pre">delim</span></tt>.  Delim itself is not included. E.g. <tt class="docutils literal"><span class="pre">@[&quot;a&quot;, &quot;--&quot;, &quot;b&quot;, &quot;c&quot;].split &quot;--&quot; == @[@[&quot;a&quot;], @[&quot;b&quot;, &quot;c&quot;]]</span></tt>.
    
  </dd>
</div>

</div>
<div id="startsWithI-procs-all">
  <div id="startsWithI,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#startsWithI%2Cstring%2Cstring"><span class="Identifier">startsWithI</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">,</span> <span class="Identifier">prefix</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">noSideEffect</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Case insensitive variant of startsWith.
    
  </dd>
</div>

</div>
<div id="tmplParsed-procs-all">
  <div id="tmplParsed,openArray[char],char">
  <dt><pre><span class="Keyword">proc</span> <a href="#tmplParsed%2CopenArray%5Bchar%5D%2Cchar"><span class="Identifier">tmplParsed</span></a><span class="Other">(</span><span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">meta</span> <span class="Other">=</span> <span class="CharLit">'$'</span><span class="Other">;</span> <span class="Identifier">ids</span> <span class="Other">=</span> <span class="Identifier">alphaNum</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="strUt.html#MacroCall"><span class="Identifier">MacroCall</span></a><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Pre-process a format string template into a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">MacroCall</span><span class="Punctuation">]</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="tmplParses-procs-all">
  <div id="tmplParses,openArray[char],char">
  <dt><pre><span class="Keyword">proc</span> <a href="#tmplParses%2CopenArray%5Bchar%5D%2Cchar"><span class="Identifier">tmplParses</span></a><span class="Other">(</span><span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">meta</span> <span class="Other">=</span> <span class="CharLit">'$'</span><span class="Other">;</span> <span class="Identifier">ids</span> <span class="Other">=</span> <span class="Identifier">alphaNum</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span>
    <a href="strUt.html#MacroCallX"><span class="Identifier">MacroCallX</span></a><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Pre-process a format string template into a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">MacroCallX</span><span class="Punctuation">]</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="toString-procs-all">
  <div id="toString,openArray[char]">
  <dt><pre><span class="Keyword">proc</span> <a href="#toString%2CopenArray%5Bchar%5D"><span class="Identifier">toString</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="uint64toDecimal-procs-all">
  <div id="uint64toDecimal,openArray[char],uint64">
  <dt><pre><span class="Keyword">func</span> <a href="#uint64toDecimal%2CopenArray%5Bchar%5D%2Cuint64"><span class="Identifier">uint64toDecimal</span></a><span class="Other">(</span><span class="Identifier">res</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">uint64</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Flexible <tt class="docutils literal"><span class="pre"><span class="Identifier">oA</span><span class="Punctuation">[</span><span class="Identifier">char</span><span class="Punctuation">]</span></span></tt> inp; Fast 3B @a time out; Answer is <tt class="docutils literal"><span class="pre"><span class="Identifier">res</span><span class="Punctuation">[</span><span class="Identifier">result</span><span class="Operator">..^</span><span class="DecNumber">1</span><span class="Punctuation">]</span></span></tt>.
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="15">
  <h1><a class="toc-backref" href="#15">Iterators</a></h1>
  <dl class="item">
    <div id="tmplParse-iterators-all">
  <div id="tmplParse.i,openArray[char],char">
  <dt><pre><span class="Keyword">iterator</span> <a href="#tmplParse.i%2CopenArray%5Bchar%5D%2Cchar"><span class="Identifier">tmplParse</span></a><span class="Other">(</span><span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">meta</span> <span class="Other">=</span> <span class="CharLit">'$'</span><span class="Other">;</span> <span class="Identifier">ids</span> <span class="Other">=</span> <span class="Identifier">alphaNum</span><span class="Other">)</span><span class="Other">:</span> <a href="strUt.html#MacroCall"><span class="Identifier">MacroCall</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>A text template parser converting <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span></span></tt> into macro calls encoded as <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span></span></tt>-relative slices.  Callers resolve any calls.  Macro call syntax is <tt class="docutils literal"><span class="pre"><span class="Operator">$</span><span class="Identifier">ID</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Operator">%</span><span class="Punctuation">[</span><span class="Identifier">ID</span><span class="Punctuation">]</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Operator">$</span><span class="Punctuation">{</span><span class="Punctuation">(</span><span class="Identifier">ID</span><span class="Punctuation">)</span><span class="Identifier">ARG</span><span class="Punctuation">}</span></span></tt> embedded within literal text.  <tt class="docutils literal"><span class="pre"><span class="Operator">$</span> <span class="Operator">|</span> <span class="Operator">%</span> <span class="Operator">|</span> <span class="Operator">..</span></span></tt> is a self-escaping <tt class="docutils literal"><span class="pre"><span class="Identifier">meta</span></span></tt> char.  This generalizes most self-escaping format string interpolation styles.  The idea is to make it easy to write <tt class="docutils literal"><span class="pre"><span class="Identifier">std</span><span class="Operator">/</span><span class="Identifier">strutils</span><span class="Operator">.%</span></span></tt>, C/Python <tt class="docutils literal"><span class="pre"><span class="Identifier">printf</span></span></tt>-like string interpolation with one standard, but flexible syntax.</p>
<p>Specifically, if <tt class="docutils literal"><span class="pre"><span class="Punctuation">[</span><span class="Identifier">X</span><span class="Punctuation">]</span></span></tt> =&gt; OPTIONAL X &amp; <tt class="docutils literal"><span class="pre"><span class="Operator">&lt;</span><span class="Identifier">Y</span><span class="Operator">&gt;</span></span></tt> =&gt; NEEDED Y, then a call is:</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">M</span><span class="Punctuation">[</span><span class="Identifier">B</span><span class="Punctuation">]</span><span class="Punctuation">[</span><span class="Identifier">Q</span><span class="Punctuation">]</span><span class="Operator">&lt;</span><span class="Identifier">ID</span><span class="Operator">&gt;</span><span class="Punctuation">[</span><span class="Identifier">next</span> <span class="Identifier">q</span> <span class="Identifier">post</span> <span class="Identifier">Q</span><span class="Punctuation">]</span><span class="Punctuation">[</span><span class="Identifier">ARGUMENT</span> <span class="Identifier">STRING</span><span class="Punctuation">]</span><span class="Punctuation">[</span><span class="Identifier">next</span> <span class="Identifier">b</span> <span class="Identifier">post</span> <span class="Identifier">B</span><span class="Punctuation">]</span></span></tt></li>
</ul>
<p>where</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">M</span></span></tt> is the so-called self-escaping warning meta char, like '$', '%', ..</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">B</span></span></tt> is an optional opening brace | quote (any NON-<tt class="docutils literal"><span class="pre"><span class="Identifier">ids</span></span></tt>)</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">b</span></span></tt>=<tt class="docutils literal"><span class="pre"><span class="Identifier">other</span><span class="Punctuation">[</span><span class="Identifier">B</span><span class="Punctuation">]</span></span></tt> is closing pair (<tt class="docutils literal"><span class="pre"><span class="Identifier">other</span><span class="Punctuation">[</span><span class="Identifier">c</span><span class="Punctuation">]</span></span></tt>==c except for <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Punctuation">{</span><span class="Operator">&lt;&gt;</span><span class="Punctuation">}</span><span class="Punctuation">]</span><span class="Punctuation">)</span></span></tt>)</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">Q</span></span></tt> is a macro id brace|quote (IF non-<tt class="docutils literal"><span class="pre"><span class="Identifier">ids</span></span></tt>); q=<tt class="docutils literal"><span class="pre"><span class="Identifier">other</span><span class="Punctuation">[</span><span class="Identifier">Q</span><span class="Punctuation">]</span></span></tt> closes</li>
</ul>
<p>No <tt class="docutils literal"><span class="pre"><span class="Identifier">B</span></span></tt> =&gt; calls stop at the next NON-<tt class="docutils literal"><span class="pre"><span class="Identifier">ids</span></span></tt> char (eg., <tt class="docutils literal"><span class="pre"><span class="Punctuation">:</span></span></tt> in <tt class="docutils literal"><span class="pre"><span class="Operator">$</span><span class="Identifier">ID</span><span class="Punctuation">:</span><span class="Identifier">x</span></span></tt>) and the macro gets an empty ARG.  No <tt class="docutils literal"><span class="pre"><span class="Identifier">Q</span></span></tt> =&gt; ARG=&quot;&quot; and whole post-M fragment is <tt class="docutils literal"><span class="pre"><span class="Identifier">ID</span></span></tt> (egs., <tt class="docutils literal"><span class="pre"><span class="Operator">$</span><span class="Identifier">FOO</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Operator">$</span><span class="CharLit">'WITH SPACES'</span></span></tt>).  Self-escaping means MM-&gt;M (only outside calls).  <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span></span></tt> writers must pick non-colliding brace | quotes.</p>
<p>RETURN VALUE is intended to be assigned to an <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="Identifier">id</span><span class="Punctuation">,</span> <span class="Identifier">arg</span><span class="Punctuation">,</span> <span class="Identifier">call</span><span class="Punctuation">)</span></span></tt> tuple where <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span><span class="Punctuation">[</span><span class="Identifier">id</span><span class="Operator">|</span><span class="Identifier">arg</span><span class="Operator">|</span><span class="Identifier">call</span><span class="Punctuation">]</span></span></tt> can extract that thing from <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span></span></tt>. <tt class="docutils literal"><span class="pre"><span class="Identifier">id</span><span class="Operator">.</span><span class="Identifier">idIsLiteral</span></span></tt> is true for a special macro meaning <tt class="docutils literal"><span class="pre"><span class="Identifier">fmt</span><span class="Punctuation">[</span><span class="Identifier">arg</span><span class="Punctuation">]</span></span></tt> is trailing literal text.  A fully worked out example with tests is <tt class="docutils literal"><span class="pre"><span class="Identifier">examples</span><span class="Operator">/</span><span class="Identifier">tmpl</span><span class="Operator">.</span><span class="Identifier">nim</span></span></tt>.</p>

    
  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2025-07-22 09:55:05 UTC</small>
      </div>
    </div>
  </div>
  
</body>
</html>
