<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cligen/osUt</title>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css?v=2.3.1">

<!-- JS -->
<script type="text/javascript" src="../dochack.js?v=2.3.1"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">cligen/osUt</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="../theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Ce" title="Ce = CatchableError">Ce</a></li>
<li><a class="reference" href="#CPUSet" title="CPUSet {.importc: &quot;cpu_set_t&quot;, header: &quot;&lt;sched.h&gt;&quot;, final, pure.} = object
  nil">CPUSet</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#9" id="59">Lets</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#IOFBF" title="IOFBF = vIOFBF">IOFBF</a></li>
<li><a class="reference" href="#IOLBF" title="IOLBF = vIOLBF">IOLBF</a></li>
<li><a class="reference" href="#IONBF" title="IONBF = vIONBF">IONBF</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">autoClose
  <li><a class="reference" href="#autoClose" title="autoClose()">autoClose()</a></li>

</ul>
<ul class="simple nested-toc-section">autoOpen
  <li><a class="reference" href="#autoOpen%2Cstring%2Cint" title="autoOpen(path: string; mode = fmWrite; bufSize = -1): File">autoOpen(path: string; mode = fmWrite; bufSize = -1): File</a></li>

</ul>
<ul class="simple nested-toc-section">both
  <li><a class="reference" href="#both%2C%2Cseq%5BT%5D" title="both[T](it: iterator (): T; s: seq[T]): iterator (): T">both[T](it: iterator (): T; s: seq[T]): iterator (): T</a></li>
<li><a class="reference" href="#both%2Cseq%5BT%5D%2C" title="both[T](s: seq[T]; it: iterator (): T): iterator (): T">both[T](s: seq[T]; it: iterator (): T): iterator (): T</a></li>

</ul>
<ul class="simple nested-toc-section">c_getdelim
  <li><a class="reference" href="#c_getdelim%2Cptr.cstring%2Cptr.csize%2Ccint%2CFile" title="c_getdelim(p: ptr cstring; nA: ptr csize; dlm: cint; f: File): int">c_getdelim(p: ptr cstring; nA: ptr csize; dlm: cint; f: File): int</a></li>

</ul>
<ul class="simple nested-toc-section">c_setvbuf
  <li><a class="reference" href="#c_setvbuf%2CFile%2Cpointer%2Ccint%2Ccsize" title="c_setvbuf(f: File; buf: pointer; mode: cint; size: csize): cint">c_setvbuf(f: File; buf: pointer; mode: cint; size: csize): cint</a></li>

</ul>
<ul class="simple nested-toc-section">clearDir
  <li><a class="reference" href="#clearDir%2Cstring" title="clearDir(dir: string)">clearDir(dir: string)</a></li>

</ul>
<ul class="simple nested-toc-section">cpu_set
  <li><a class="reference" href="#cpu_set%2Ccint%2Cptr.CPUSet" title="cpu_set(cpu: cint; set: ptr CPUSet)">cpu_set(cpu: cint; set: ptr CPUSet)</a></li>

</ul>
<ul class="simple nested-toc-section">cpu_zero
  <li><a class="reference" href="#cpu_zero%2Cptr.CPUSet" title="cpu_zero(set: ptr CPUSet)">cpu_zero(set: ptr CPUSet)</a></li>

</ul>
<ul class="simple nested-toc-section">eof
  <li><a class="reference" href="#eof%2CFile" title="eof(f: File): bool">eof(f: File): bool</a></li>

</ul>
<ul class="simple nested-toc-section">errstr
  <li><a class="reference" href="#errstr" title="errstr(): string">errstr(): string</a></li>

</ul>
<ul class="simple nested-toc-section">ferr
  <li><a class="reference" href="#ferr%2CFile" title="ferr(f: File): cint">ferr(f: File): cint</a></li>

</ul>
<ul class="simple nested-toc-section">fileNewerThan
  <li><a class="reference" href="#fileNewerThan%2Cstring%2Cstring" title="fileNewerThan(a, b: string): bool">fileNewerThan(a, b: string): bool</a></li>

</ul>
<ul class="simple nested-toc-section">fileOlderThan
  <li><a class="reference" href="#fileOlderThan%2Cstring%2Cstring" title="fileOlderThan(a, b: string): bool">fileOlderThan(a, b: string): bool</a></li>

</ul>
<ul class="simple nested-toc-section">fileStrings
  <li><a class="reference" href="#fileStrings%2Cstring%2Cchar" title="fileStrings(path: string; delim: char): auto">fileStrings(path: string; delim: char): auto</a></li>

</ul>
<ul class="simple nested-toc-section">findPathPattern
  <li><a class="reference" href="#findPathPattern%2Cstring" title="findPathPattern(pathPattern: string): string">findPathPattern(pathPattern: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">getcpu
  <li><a class="reference" href="#getcpu" title="getcpu(): cint">getcpu(): cint</a></li>

</ul>
<ul class="simple nested-toc-section">lgBold
  <li><a class="reference" href="#lgBold%2CFile%2Cstring" title="lgBold(f: File; s: string)">lgBold(f: File; s: string)</a></li>

</ul>
<ul class="simple nested-toc-section">lgInv
  <li><a class="reference" href="#lgInv%2CFile%2Cstring" title="lgInv(f: File; s: string)">lgInv(f: File; s: string)</a></li>

</ul>
<ul class="simple nested-toc-section">loadSym
  <li><a class="reference" href="#loadSym%2Cstring" title="loadSym(x: string): pointer">loadSym(x: string): pointer</a></li>

</ul>
<ul class="simple nested-toc-section">mkdirOpen
  <li><a class="reference" href="#mkdirOpen%2Cstring%2Cint" title="mkdirOpen(path: string; mode = fmRead; bufSize = -1): File">mkdirOpen(path: string; mode = fmRead; bufSize = -1): File</a></li>

</ul>
<ul class="simple nested-toc-section">mkdirP
  <li><a class="reference" href="#mkdirP%2Cstring" title="mkdirP(path: string)">mkdirP(path: string)</a></li>

</ul>
<ul class="simple nested-toc-section">mkdirTo
  <li><a class="reference" href="#mkdirTo%2Cstring" title="mkdirTo(path: string)">mkdirTo(path: string)</a></li>

</ul>
<ul class="simple nested-toc-section">open
  <li><a class="reference" href="#open%2Ccint%2Cint" title="open(fd: cint; mode = fmRead; bufMode = IOFBF; bufSize = 4096): File">open(fd: cint; mode = fmRead; bufMode = IOFBF; bufSize = 4096): File</a></li>

</ul>
<ul class="simple nested-toc-section">pclose
  <li><a class="reference" href="#pclose%2CFile%2Cstring" title="pclose(f: File; cmd: string): cint">pclose(f: File; cmd: string): cint</a></li>

</ul>
<ul class="simple nested-toc-section">perror
  <li><a class="reference" href="#perror%2Ccstring" title="perror(x: cstring; err = stderr)">perror(x: cstring; err = stderr)</a></li>
<li><a class="reference" href="#perror%2Ccstring%2Cint%2COSErrorCode" title="perror(x: cstring; len: int; code: OSErrorCode; err = stderr)">perror(x: cstring; len: int; code: OSErrorCode; err = stderr)</a></li>
<li><a class="reference" href="#perror%2Ccstring%2Cint" title="perror(x: cstring; len: int; err = stderr)">perror(x: cstring; len: int; err = stderr)</a></li>

</ul>
<ul class="simple nested-toc-section">popenr
  <li><a class="reference" href="#popenr%2Cstring%2Cstring%2Cint" title="popenr(cmd: string; path = &quot;&quot;; bufSize = -1): File">popenr(cmd: string; path = &quot;&quot;; bufSize = -1): File</a></li>

</ul>
<ul class="simple nested-toc-section">popenw
  <li><a class="reference" href="#popenw%2Cstring%2Cstring%2Cint" title="popenw(cmd: string; path = &quot;&quot;; bufSize = -1): File">popenw(cmd: string; path = &quot;&quot;; bufSize = -1): File</a></li>

</ul>
<ul class="simple nested-toc-section">putchar
  <li><a class="reference" href="#putchar%2Cchar" title="putchar(c: char): cint">putchar(c: char): cint</a></li>

</ul>
<ul class="simple nested-toc-section">rdRecs
  <li><a class="reference" href="#rdRecs%2Ccint%2Cstring%2Cchar%2Cint" title="rdRecs(fd: cint; buf: var string; eor = '\x00'; n = 16384): int">rdRecs(fd: cint; buf: var string; eor = '\x00'; n = 16384): int</a></li>

</ul>
<ul class="simple nested-toc-section">replacingUrite
  <li><a class="reference" href="#replacingUrite%2CFile%2Cstring%2Cchar%2Cstring" title="replacingUrite(f: File; s: string; eor: char; subEor: string)">replacingUrite(f: File; s: string; eor: char; subEor: string)</a></li>

</ul>
<ul class="simple nested-toc-section">run
  <li><a class="reference" href="#run%2CopenArray%5Bstring%5D%2CStringTableRef" title="run(cmd: openArray[string]; env: StringTableRef = nil;
    opts = {poEchoCmd, poUsePath}; dryRun = false; logFile = stderr;
    logWrite = lgBold): int">run(cmd: openArray[string]; env: StringTableRef = nil;
    opts = {poEchoCmd, poUsePath}; dryRun = false; logFile = stderr;
    logWrite = lgBold): int</a></li>

</ul>
<ul class="simple nested-toc-section">sched_setaffinity
  <li><a class="reference" href="#sched_setaffinity%2CPid%2Ccsize%2Cptr.CPUSet" title="sched_setaffinity(pid: Pid; sz: csize; mask: ptr CPUSet): cint">sched_setaffinity(pid: Pid; sz: csize; mask: ptr CPUSet): cint</a></li>

</ul>
<ul class="simple nested-toc-section">setAffinity
  <li><a class="reference" href="#setAffinity%2CopenArray%5Bcint%5D" title="setAffinity(cpus: openArray[cint] = [])">setAffinity(cpus: openArray[cint] = [])</a></li>

</ul>
<ul class="simple nested-toc-section">setFileSize
  <li><a class="reference" href="#setFileSize%2CFileHandle%2Cint64%2Cint64" title="setFileSize(fh: FileHandle; currSize, newSize: int64): OSErrorCode">setFileSize(fh: FileHandle; currSize, newSize: int64): OSErrorCode</a></li>

</ul>
<ul class="simple nested-toc-section">simplifyPath
  <li><a class="reference" href="#simplifyPath%2Cstring" title="simplifyPath(path: string; collapseDotDot = false): string">simplifyPath(path: string; collapseDotDot = false): string</a></li>

</ul>
<ul class="simple nested-toc-section">splitPathName
  <li><a class="reference" href="#splitPathName%2Cstring" title="splitPathName(path: string; shortestExt = false): tuple[dir, name, ext: string]">splitPathName(path: string; shortestExt = false): tuple[dir, name, ext: string]</a></li>

</ul>
<ul class="simple nested-toc-section">touch
  <li><a class="reference" href="#touch%2Cstring" title="touch(path: string)">touch(path: string)</a></li>

</ul>
<ul class="simple nested-toc-section">uRd
  <li><a class="reference" href="#uRd%2CFile%2CT" title="uRd[T](f: File; ob: var T): bool">uRd[T](f: File; ob: var T): bool</a></li>

</ul>
<ul class="simple nested-toc-section">ureadBuffer
  <li><a class="reference" href="#ureadBuffer%2CFile%2Cpointer%2CNatural" title="ureadBuffer(f: File; buffer: pointer; len: Natural): int">ureadBuffer(f: File; buffer: pointer; len: Natural): int</a></li>

</ul>
<ul class="simple nested-toc-section">urite
  <li><a class="reference" href="#urite%2CFile%2Cvarargs%5Bstring%2C%5D" title="urite(f: File; a: varargs[string, `$`])">urite(f: File; a: varargs[string, `$`])</a></li>
<li><a class="reference" href="#urite%2CFile%2Cstring" title="urite(f: File; s: string)">urite(f: File; s: string)</a></li>
<li><a class="reference" href="#urite%2CFile%2Cstring%2CHSlice%5BA%2CB%5D" title="urite[A, B](f: File; str: string; s: HSlice[A, B])">urite[A, B](f: File; str: string; s: HSlice[A, B])</a></li>

</ul>
<ul class="simple nested-toc-section">uriteBuffer
  <li><a class="reference" href="#uriteBuffer%2CFile%2Cpointer%2CNatural" title="uriteBuffer(f: File; buffer: pointer; len: Natural): int">uriteBuffer(f: File; buffer: pointer; len: Natural): int</a></li>

</ul>
<ul class="simple nested-toc-section">useStdin
  <li><a class="reference" href="#useStdin%2Cstring" title="useStdin(path: string): bool">useStdin(path: string): bool</a></li>

</ul>
<ul class="simple nested-toc-section">uWr
  <li><a class="reference" href="#uWr%2CFile%2CT" title="uWr[T](f: File; ob: var T): bool">uWr[T](f: File; ob: var T): bool</a></li>

</ul>
<ul class="simple nested-toc-section">walkPatSorted
  <li><a class="reference" href="#walkPatSorted%2Cstring" title="walkPatSorted(pattern: string): seq[string]">walkPatSorted(pattern: string): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">wr
  <li><a class="reference" href="#wr%2Ccint%2CT" title="wr[T](fd: cint; ob: T): int">wr[T](fd: cint; ob: T): int</a></li>

</ul>
<ul class="simple nested-toc-section">wr0term
  <li><a class="reference" href="#wr0term%2Ccint%2Cstring" title="wr0term(fd: cint; buf: string): int">wr0term(fd: cint; buf: string): int</a></li>

</ul>
<ul class="simple nested-toc-section">write
  <li><a class="reference" href="#write%2Ccint%2Cstring" title="write(fh: cint; s: string)">write(fh: cint; s: string)</a></li>

</ul>
<ul class="simple nested-toc-section">writeContAddrTempFile
  <li><a class="reference" href="#writeContAddrTempFile%2Cstring%2Cstring%2Cstring" title="writeContAddrTempFile(path, extension, content: string): string">writeContAddrTempFile(path, extension, content: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">writeNumberToFile
  <li><a class="reference" href="#writeNumberToFile%2Cstring%2Cint" title="writeNumberToFile(path: string; num: int)">writeNumberToFile(path: string; num: int)</a></li>

</ul>
<ul class="simple nested-toc-section">wrLenBuf
  <li><a class="reference" href="#wrLenBuf%2Ccint%2Cstring" title="wrLenBuf(fd: cint; buf: string): int">wrLenBuf(fd: cint; buf: string): int</a></li>

</ul>
<ul class="simple nested-toc-section">wrLenSeq
  <li><a class="reference" href="#wrLenSeq%2Ccint%2Cseq%5BT%5D" title="wrLenSeq[T](fd: cint; s: seq[T]): int">wrLenSeq[T](fd: cint; s: seq[T]): int</a></li>

</ul>
<ul class="simple nested-toc-section">wrLine
  <li><a class="reference" href="#wrLine%2Ccint%2Cstring" title="wrLine(fd: cint; buf: string): int">wrLine(fd: cint; buf: string): int</a></li>

</ul>
<ul class="simple nested-toc-section">wrOb
  <li><a class="reference" href="#wrOb%2Ccint%2CT" title="wrOb[T](fd: cint; ob: T): int">wrOb[T](fd: cint; ob: T): int</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#15" id="65">Iterators</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">getDelim
  <li><a class="reference" href="#getDelim.i%2CFile%2Cchar" title="getDelim(f: File; dlm: char = '\n'): string">getDelim(f: File; dlm: char = '\n'): string</a></li>
<li><a class="reference" href="#getDelim.i%2Cstring%2Cchar" title="getDelim(path: string; dlm: char = '\n'): string">getDelim(path: string; dlm: char = '\n'): string</a></li>

</ul>
<ul class="simple nested-toc-section">getDelims
  <li><a class="reference" href="#getDelims.i%2CFile%2Cchar" title="getDelims(f: File; dlm: char = '\n'): (cstring, int)">getDelims(f: File; dlm: char = '\n'): (cstring, int)</a></li>
<li><a class="reference" href="#getDelims.i%2Cstring%2Cchar" title="getDelims(path: string; dlm: char = '\n'): (cstring, int)">getDelims(path: string; dlm: char = '\n'): (cstring, int)</a></li>

</ul>
<ul class="simple nested-toc-section">getLenPfx
  <li><a class="reference" href="#getLenPfx.i%2CFile" title="getLenPfx[T: SomeNumber](f: File): string">getLenPfx[T: SomeNumber](f: File): string</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#18" id="68">Templates</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">erru
  <li><a class="reference" href="#erru.t%2Cvarargs%5Bstring%2C%5D" title="erru(a: varargs[string, `$`])">erru(a: varargs[string, `$`])</a></li>

</ul>
<ul class="simple nested-toc-section">outu
  <li><a class="reference" href="#outu.t%2Cvarargs%5Bstring%2C%5D" title="outu(a: varargs[string, `$`])">outu(a: varargs[string, `$`])</a></li>

</ul>
<ul class="simple nested-toc-section">timeIt
  <li><a class="reference" href="#timeIt.t%2Cuntyped%2Cstring%2Cfloat%2Cint%2Cstring%2Cint%2Cuntyped" title="timeIt(output: untyped; label: string; unit = 0.000001; places = 3; sep = &quot;\n&quot;;
       reps = 1; body: untyped)">timeIt(output: untyped; label: string; unit = 0.000001; places = 3; sep = &quot;\n&quot;;
       reps = 1; body: untyped)</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    
    <div id="tocRoot"></div>
    
    <p class="module-desc">This module is a grab bag of utility code that is often useful interfacing between CLIs and the OS.  Example:<pre class="listing"><span class="Keyword">proc</span> <span class="Identifier">something</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">file</span><span class="Operator">=</span><span class="StringLit">&quot;&quot;</span><span class="Punctuation">,</span> <span class="Identifier">delim</span><span class="Operator">=</span><span class="CharLit">'\n'</span><span class="Punctuation">,</span> <span class="Identifier">paths</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">int</span> <span class="Operator">=</span>
  <span class="Comment">## Do example on paths which are the UNION of ``paths`` &amp; optional</span>
  <span class="Comment">## ``delim``-delimited input ``file`` (stdin if &quot;-&quot;|if &quot;&quot; &amp; stdin not</span>
  <span class="Comment">## a tty).  Eg., ``find -type f -print0|example -d\\x00 a b c``.</span>
  <span class="Keyword">for</span> <span class="Identifier">path</span> <span class="Keyword">in</span> <span class="Identifier">both</span><span class="Punctuation">(</span><span class="Identifier">fileStrings</span><span class="Punctuation">(</span><span class="Identifier">file</span><span class="Punctuation">,</span> <span class="Identifier">delim</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">paths</span><span class="Punctuation">)</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">discard</span>
<span class="Identifier">dispatch</span><span class="Punctuation">(</span><span class="Identifier">something</span><span class="Punctuation">)</span></pre>This is a portability shim include file for when you want code to work without deprecation warnings under younger &amp; older Nim compilers.  Just <tt class="docutils literal"><span class="pre"><span class="Keyword">include</span> <span class="Identifier">cligen</span><span class="Operator">/</span><span class="Identifier">unsafeAdr</span></span></tt> at the global scope before using unsafeAddr.</p>
    <div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="Ce">
  <dt><pre><a href="osUt.html#Ce"><span class="Identifier">Ce</span></a> <span class="Other">=</span> <span class="Identifier">CatchableError</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="CPUSet">
  <dt><pre><a href="osUt.html#CPUSet"><span class="Identifier">CPUSet</span></a> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;cpu_set_t&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;sched.h&gt;&quot;</span><span class="Other">,</span> <span class="Identifier">final</span><span class="Other">,</span> <span class="Identifier">pure</span>.} <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">nil</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="9">
  <h1><a class="toc-backref" href="#9">Lets</a></h1>
  <dl class="item">
    <div id="IOFBF">
  <dt><pre><a href="osUt.html#IOFBF"><span class="Identifier">IOFBF</span></a> <span class="Other">=</span> <span class="Identifier">vIOFBF</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="IOLBF">
  <dt><pre><a href="osUt.html#IOLBF"><span class="Identifier">IOLBF</span></a> <span class="Other">=</span> <span class="Identifier">vIOLBF</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="IONBF">
  <dt><pre><a href="osUt.html#IONBF"><span class="Identifier">IONBF</span></a> <span class="Other">=</span> <span class="Identifier">vIONBF</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="autoClose-procs-all">
  <div id="autoClose">
  <dt><pre><span class="Keyword">proc</span> <a href="#autoClose"><span class="Identifier">autoClose</span></a><span class="Other">(</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Close all files opened so far by autoOpen.
    
  </dd>
</div>

</div>
<div id="autoOpen-procs-all">
  <div id="autoOpen,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#autoOpen%2Cstring%2Cint"><span class="Identifier">autoOpen</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">mode</span> <span class="Other">=</span> <span class="Identifier">fmWrite</span><span class="Other">;</span> <span class="Identifier">bufSize</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">File</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteDirEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    For callers in expressional situations to open files on-demand.
    
  </dd>
</div>

</div>
<div id="both-procs-all">
  <div id="both,,seq[T]">
  <dt><pre><span class="Keyword">proc</span> <a href="#both%2C%2Cseq%5BT%5D"><span class="Identifier">both</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">it</span><span class="Other">:</span> <span class="Keyword">iterator</span> <span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">iterator</span> <span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    Return an iterator yielding both seq elements and the passed iterator.
    
  </dd>
</div>
<div id="both,seq[T],">
  <dt><pre><span class="Keyword">proc</span> <a href="#both%2Cseq%5BT%5D%2C"><span class="Identifier">both</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">it</span><span class="Other">:</span> <span class="Keyword">iterator</span> <span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">iterator</span> <span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    Return an iterator yielding both seq elements and the passed iterator.
    
  </dd>
</div>

</div>
<div id="c_getdelim-procs-all">
  <div id="c_getdelim,ptr.cstring,ptr.csize,cint,File">
  <dt><pre><span class="Keyword">proc</span> <a href="#c_getdelim%2Cptr.cstring%2Cptr.csize%2Ccint%2CFile"><span class="Identifier">c_getdelim</span></a><span class="Other">(</span><span class="Identifier">p</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">cstring</span><span class="Other">;</span> <span class="Identifier">nA</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">csize</span><span class="Other">;</span> <span class="Identifier">dlm</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;getdelim&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;stdio.h&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="c_setvbuf-procs-all">
  <div id="c_setvbuf,File,pointer,cint,csize">
  <dt><pre><span class="Keyword">proc</span> <a href="#c_setvbuf%2CFile%2Cpointer%2Ccint%2Ccsize"><span class="Identifier">c_setvbuf</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">mode</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <span class="Identifier">csize</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;setvbuf&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;stdio.h&gt;&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="clearDir-procs-all">
  <div id="clearDir,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#clearDir%2Cstring"><span class="Identifier">clearDir</span></a><span class="Other">(</span><span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
                             <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadDirEffect</span><span class="Other">,</span> <span class="Identifier">WriteDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Best effort removal of the <em>contents</em> of <tt class="docutils literal"><span class="pre"><span class="Identifier">dir</span></span></tt>, but not <tt class="docutils literal"><span class="pre"><span class="Identifier">dir</span></span></tt> itself.
    
  </dd>
</div>

</div>
<div id="cpu_set-procs-all">
  <div id="cpu_set,cint,ptr.CPUSet">
  <dt><pre><span class="Keyword">proc</span> <a href="#cpu_set%2Ccint%2Cptr.CPUSet"><span class="Identifier">cpu_set</span></a><span class="Other">(</span><span class="Identifier">cpu</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">set</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="osUt.html#CPUSet"><span class="Identifier">CPUSet</span></a><span class="Other">)</span> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;CPU_SET&quot;</span><span class="Other">,</span>
    <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;sched.h&gt;&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="cpu_zero-procs-all">
  <div id="cpu_zero,ptr.CPUSet">
  <dt><pre><span class="Keyword">proc</span> <a href="#cpu_zero%2Cptr.CPUSet"><span class="Identifier">cpu_zero</span></a><span class="Other">(</span><span class="Identifier">set</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="osUt.html#CPUSet"><span class="Identifier">CPUSet</span></a><span class="Other">)</span> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;CPU_ZERO&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;sched.h&gt;&quot;</span><span class="Other">,</span>
                                 <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="eof-procs-all">
  <div id="eof,File">
  <dt><pre><span class="Keyword">proc</span> <a href="#eof%2CFile"><span class="Identifier">eof</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="errstr-procs-all">
  <div id="errstr">
  <dt><pre><span class="Keyword">proc</span> <a href="#errstr"><span class="Identifier">errstr</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="ferr-procs-all">
  <div id="ferr,File">
  <dt><pre><span class="Keyword">proc</span> <a href="#ferr%2CFile"><span class="Identifier">ferr</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;ferror&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;stdio.h&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                           <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    expose ANSI C stdio error condition checking
    
  </dd>
</div>

</div>
<div id="fileNewerThan-procs-all">
  <div id="fileNewerThan,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#fileNewerThan%2Cstring%2Cstring"><span class="Identifier">fileNewerThan</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    True if both path <tt class="docutils literal"><span class="pre"><span class="Identifier">a</span></span></tt> &amp; <tt class="docutils literal"><span class="pre"><span class="Identifier">b</span></span></tt> exist and <tt class="docutils literal"><span class="pre"><span class="Identifier">a</span></span></tt> is newer
    
  </dd>
</div>

</div>
<div id="fileOlderThan-procs-all">
  <div id="fileOlderThan,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#fileOlderThan%2Cstring%2Cstring"><span class="Identifier">fileOlderThan</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    True if both path <tt class="docutils literal"><span class="pre"><span class="Identifier">a</span></span></tt> &amp; <tt class="docutils literal"><span class="pre"><span class="Identifier">b</span></span></tt> exist and <tt class="docutils literal"><span class="pre"><span class="Identifier">a</span></span></tt> is older
    
  </dd>
</div>

</div>
<div id="fileStrings-procs-all">
  <div id="fileStrings,string,char">
  <dt><pre><span class="Keyword">proc</span> <a href="#fileStrings%2Cstring%2Cchar"><span class="Identifier">fileStrings</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">delim</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">auto</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return an iterator yielding <tt class="docutils literal"><span class="pre">delim</span></tt>-delimited records in file <tt class="docutils literal"><span class="pre">path</span></tt>. Note <tt class="docutils literal"><span class="pre">path = &quot;/&quot;</span></tt> is equivalent to a Unix <tt class="docutils literal"><span class="pre">path = &quot;/dev/null&quot;</span></tt>.
    
  </dd>
</div>

</div>
<div id="findPathPattern-procs-all">
  <div id="findPathPattern,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#findPathPattern%2Cstring"><span class="Identifier">findPathPattern</span></a><span class="Other">(</span><span class="Identifier">pathPattern</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Search directory containing pathPattern (or &quot;.&quot;) for <em>first</em> matching name. Pattern matching is currently substring only.
    
  </dd>
</div>

</div>
<div id="getcpu-procs-all">
  <div id="getcpu">
  <dt><pre><span class="Keyword">proc</span> <a href="#getcpu"><span class="Identifier">getcpu</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;sched_getcpu&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;sched.h&gt;&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                      <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="lgBold-procs-all">
  <div id="lgBold,File,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#lgBold%2CFile%2Cstring"><span class="Identifier">lgBold</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span>
                                  <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Log to a <tt class="docutils literal"><span class="pre"><span class="Identifier">File</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">f</span></span></tt> with ANSI SGR bold.
    
  </dd>
</div>

</div>
<div id="lgInv-procs-all">
  <div id="lgInv,File,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#lgInv%2CFile%2Cstring"><span class="Identifier">lgInv</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span>
                                 <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Log to a <tt class="docutils literal"><span class="pre"><span class="Identifier">File</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">f</span></span></tt> with ANSI SGR inverse.
    
  </dd>
</div>

</div>
<div id="loadSym-procs-all">
  <div id="loadSym,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#loadSym%2Cstring"><span class="Identifier">loadSym</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">pointer</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span>
                                   <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    split <tt class="docutils literal"><span class="pre">x</span></tt> on <tt class="docutils literal"><span class="pre">':'</span></tt> into library:symbol parts, <tt class="docutils literal"><span class="pre">dynlib.loadLib</span></tt> the library and then <tt class="docutils literal"><span class="pre">dynlib.symAddr</span></tt> the symbol.  Returns the pointer or nil if either operation fails.
    
  </dd>
</div>

</div>
<div id="mkdirOpen-procs-all">
  <div id="mkdirOpen,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#mkdirOpen%2Cstring%2Cint"><span class="Identifier">mkdirOpen</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">mode</span> <span class="Other">=</span> <span class="Identifier">fmRead</span><span class="Other">;</span> <span class="Identifier">bufSize</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">File</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteDirEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Wrapper around system.open that ensures leading directory prefix exists.
    
  </dd>
</div>

</div>
<div id="mkdirP-procs-all">
  <div id="mkdirP,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#mkdirP%2Cstring"><span class="Identifier">mkdirP</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
                            <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteDirEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Create all parent dirs and path itself like Unix <tt class="docutils literal"><span class="pre"><span class="Identifier">mkdir</span> <span class="Operator">-</span><span class="Identifier">p</span> <span class="Identifier">foo</span><span class="Operator">/</span><span class="Identifier">bar</span><span class="Operator">/</span><span class="Identifier">baz</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="mkdirTo-procs-all">
  <div id="mkdirTo,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#mkdirTo%2Cstring"><span class="Identifier">mkdirTo</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
                             <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteDirEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Ensure leading directory prefix of <tt class="docutils literal"><span class="pre"><span class="Identifier">path</span></span></tt> exists.
    
  </dd>
</div>

</div>
<div id="open-procs-all">
  <div id="open,cint,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#open%2Ccint%2Cint"><span class="Identifier">open</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">mode</span> <span class="Other">=</span> <span class="Identifier">fmRead</span><span class="Other">;</span> <span class="Identifier">bufMode</span> <span class="Other">=</span> <span class="Identifier">IOFBF</span><span class="Other">;</span> <span class="Identifier">bufSize</span> <span class="Other">=</span> <span class="DecNumber">4096</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">File</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Make File from OS-level handle <tt class="docutils literal"><span class="pre"><span class="Identifier">fd</span></span></tt> w/specific mode, buffer mode &amp; size.
    
  </dd>
</div>

</div>
<div id="pclose-procs-all">
  <div id="pclose,File,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#pclose%2CFile%2Cstring"><span class="Identifier">pclose</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">cmd</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Clean-up for <tt class="docutils literal"><span class="pre"><span class="Identifier">popen</span><span class="Punctuation">[</span><span class="Identifier">rw</span><span class="Punctuation">]</span></span></tt>.  Returns exit status of popen()d command.
    
  </dd>
</div>

</div>
<div id="perror-procs-all">
  <div id="perror,cstring">
  <dt><pre><span class="Keyword">proc</span> <a href="#perror%2Ccstring"><span class="Identifier">perror</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">cstring</span><span class="Other">;</span> <span class="Identifier">err</span> <span class="Other">=</span> <span class="Identifier">stderr</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span>
                                        <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Clunky w/spartan msgs, but allows safe output from OpenMP || blocks.
    
  </dd>
</div>
<div id="perror,cstring,int,OSErrorCode">
  <dt><pre><span class="Keyword">proc</span> <a href="#perror%2Ccstring%2Cint%2COSErrorCode"><span class="Identifier">perror</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">cstring</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">code</span><span class="Other">:</span> <span class="Identifier">OSErrorCode</span><span class="Other">;</span> <span class="Identifier">err</span> <span class="Other">=</span> <span class="Identifier">stderr</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Clunky w/spartan msgs, but allows safe output from OpenMP || blocks.
    
  </dd>
</div>
<div id="perror,cstring,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#perror%2Ccstring%2Cint"><span class="Identifier">perror</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">cstring</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">err</span> <span class="Other">=</span> <span class="Identifier">stderr</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Clunky w/spartan msgs, but allows safe output from OpenMP || blocks.
    
  </dd>
</div>

</div>
<div id="popenr-procs-all">
  <div id="popenr,string,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#popenr%2Cstring%2Cstring%2Cint"><span class="Identifier">popenr</span></a><span class="Other">(</span><span class="Identifier">cmd</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">path</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">;</span> <span class="Identifier">bufSize</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">File</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    If <tt class="docutils literal"><span class="pre"><span class="Identifier">cmd</span><span class="Operator">.</span><span class="Identifier">len</span><span class="Operator">==</span><span class="DecNumber">0</span></span></tt> this is like regular <tt class="docutils literal"><span class="pre"><span class="Identifier">open</span><span class="Punctuation">(</span><span class="Identifier">mode</span><span class="Operator">=</span><span class="Identifier">fmRead</span><span class="Punctuation">)</span></span></tt> except that &quot;&quot; or &quot;/dev/stdin&quot; are in-line translated to return <tt class="docutils literal"><span class="pre"><span class="Identifier">stdin</span></span></tt>.  It otherwise wraps <tt class="docutils literal"><span class="pre"><span class="Identifier">popen</span><span class="Punctuation">(</span><span class="Identifier">cmd</span> <span class="Operator">%</span> <span class="Identifier">path</span><span class="Punctuation">,</span> <span class="StringLit">&quot;rb&quot;</span><span class="Punctuation">)</span></span></tt>.  So, $1 is how users place <tt class="docutils literal"><span class="pre"><span class="Identifier">path</span></span></tt> in <tt class="docutils literal"><span class="pre"><span class="Identifier">cmd</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="popenw-procs-all">
  <div id="popenw,string,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#popenw%2Cstring%2Cstring%2Cint"><span class="Identifier">popenw</span></a><span class="Other">(</span><span class="Identifier">cmd</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">path</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">;</span> <span class="Identifier">bufSize</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">File</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    If <tt class="docutils literal"><span class="pre"><span class="Identifier">cmd</span><span class="Operator">.</span><span class="Identifier">len</span><span class="Operator">==</span><span class="DecNumber">0</span></span></tt> this is like regular <tt class="docutils literal"><span class="pre"><span class="Identifier">open</span><span class="Punctuation">(</span><span class="Identifier">mode</span><span class="Operator">=</span><span class="Identifier">fmWrite</span><span class="Punctuation">)</span></span></tt> except that &quot;&quot; or &quot;/dev/stdout&quot; are in-line translated to return <tt class="docutils literal"><span class="pre"><span class="Identifier">stdout</span></span></tt>. It otherwise wraps <tt class="docutils literal"><span class="pre"><span class="Identifier">popen</span><span class="Punctuation">(</span><span class="Identifier">cmd</span> <span class="Operator">%</span> <span class="Identifier">path</span><span class="Punctuation">,</span><span class="StringLit">&quot;wb&quot;</span><span class="Punctuation">)</span></span></tt>.  So, $1 is how users place <tt class="docutils literal"><span class="pre"><span class="Identifier">path</span></span></tt> in <tt class="docutils literal"><span class="pre"><span class="Identifier">cmd</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="putchar-procs-all">
  <div id="putchar,char">
  <dt><pre><span class="Keyword">proc</span> <a href="#putchar%2Cchar"><span class="Identifier">putchar</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.<span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;putchar_unlocked&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;stdio.h&quot;</span><span class="Other">,</span>
                              <span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="rdRecs-procs-all">
  <div id="rdRecs,cint,string,char,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#rdRecs%2Ccint%2Cstring%2Cchar%2Cint"><span class="Identifier">rdRecs</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">eor</span> <span class="Other">=</span> <span class="CharLit">'\x00'</span><span class="Other">;</span> <span class="Identifier">n</span> <span class="Other">=</span> <span class="DecNumber">16384</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Like read but loop if <tt class="docutils literal"><span class="pre"><span class="Keyword">end</span><span class="Operator">!=</span><span class="Identifier">eor</span></span></tt> (growing <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> to multiples of <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt>).  In effect, this reads an integral number of recs - which must still be split!
    
  </dd>
</div>

</div>
<div id="replacingUrite-procs-all">
  <div id="replacingUrite,File,string,char,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#replacingUrite%2CFile%2Cstring%2Cchar%2Cstring"><span class="Identifier">replacingUrite</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">eor</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">;</span> <span class="Identifier">subEor</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Unlocked write <tt class="docutils literal"><span class="pre"><span class="Identifier">s</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">f</span></span></tt> replacing any <tt class="docutils literal"><span class="pre"><span class="Identifier">eor</span></span></tt> char with <tt class="docutils literal"><span class="pre"><span class="Identifier">subEor</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="run-procs-all">
  <div id="run,openArray[string],StringTableRef">
  <dt><pre><span class="Keyword">proc</span> <a href="#run%2CopenArray%5Bstring%5D%2CStringTableRef"><span class="Identifier">run</span></a><span class="Other">(</span><span class="Identifier">cmd</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">env</span><span class="Other">:</span> <span class="Identifier">StringTableRef</span> <span class="Other">=</span> <span class="Keyword">nil</span><span class="Other">;</span>
         <span class="Identifier">opts</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">poEchoCmd</span><span class="Other">,</span> <span class="Identifier">poUsePath</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">dryRun</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">logFile</span> <span class="Other">=</span> <span class="Identifier">stderr</span><span class="Other">;</span>
         <span class="Identifier">logWrite</span> <span class="Other">=</span> <span class="Identifier">lgBold</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ExecIOEffect</span><span class="Other">,</span> <span class="Identifier">ReadEnvEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span><span class="Other">,</span>
                                   <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Wrap a sync(<tt class="docutils literal"><span class="pre"><span class="Identifier">waitForExit</span></span></tt>) <tt class="docutils literal"><span class="pre"><span class="Identifier">os</span><span class="Operator">.</span><span class="Identifier">startProcess</span></span></tt> BUT only print (if <tt class="docutils literal"><span class="pre"><span class="Identifier">dryRun</span></span></tt>), default to use PATH &amp; echo &amp; allow log destination/embellishment overrides.
    
  </dd>
</div>

</div>
<div id="sched_setaffinity-procs-all">
  <div id="sched_setaffinity,Pid,csize,ptr.CPUSet">
  <dt><pre><span class="Keyword">proc</span> <a href="#sched_setaffinity%2CPid%2Ccsize%2Cptr.CPUSet"><span class="Identifier">sched_setaffinity</span></a><span class="Other">(</span><span class="Identifier">pid</span><span class="Other">:</span> <span class="Identifier">Pid</span><span class="Other">;</span> <span class="Identifier">sz</span><span class="Other">:</span> <span class="Identifier">csize</span><span class="Other">;</span> <span class="Identifier">mask</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="osUt.html#CPUSet"><span class="Identifier">CPUSet</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> {.
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;sched_setaffinity&quot;</span><span class="Other">,</span> <span class="Identifier">header</span><span class="Other">:</span> <span class="StringLit">&quot;&lt;sched.h&gt;&quot;</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="setAffinity-procs-all">
  <div id="setAffinity,openArray[cint]">
  <dt><pre><span class="Keyword">proc</span> <a href="#setAffinity%2CopenArray%5Bcint%5D"><span class="Identifier">setAffinity</span></a><span class="Other">(</span><span class="Identifier">cpus</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">cint</span><span class="Other">]</span> <span class="Other">=</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Pin current thread to CPUs; No arg is like <tt class="docutils literal"><span class="pre"><span class="Identifier">setaffinity</span> <span class="Punctuation">[</span><span class="Identifier">getcpu</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">]</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="setFileSize-procs-all">
  <div id="setFileSize,FileHandle,int64,int64">
  <dt><pre><span class="Keyword">proc</span> <a href="#setFileSize%2CFileHandle%2Cint64%2Cint64"><span class="Identifier">setFileSize</span></a><span class="Other">(</span><span class="Identifier">fh</span><span class="Other">:</span> <span class="Identifier">FileHandle</span><span class="Other">;</span> <span class="Identifier">currSize</span><span class="Other">,</span> <span class="Identifier">newSize</span><span class="Other">:</span> <span class="Identifier">int64</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">OSErrorCode</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Set the size of open file pointed to by <tt class="docutils literal"><span class="pre"><span class="Identifier">fh</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">newSize</span></span></tt> if &gt;= 0.  Space is pre-allocated only when cheaper than writing.  To support no exceptions code, this returns 0 on success, elsewise last OSErrorCode.
    
  </dd>
</div>

</div>
<div id="simplifyPath-procs-all">
  <div id="simplifyPath,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#simplifyPath%2Cstring"><span class="Identifier">simplifyPath</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">collapseDotDot</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre">&quot;././hey///ho/./there/&quot;</span></tt> =&gt; <tt class="docutils literal"><span class="pre">&quot;hey/ho/there/&quot;</span></tt>.  Result always ends with <tt class="docutils literal"><span class="pre">'/'</span></tt> as source does (it's an easy client check &amp; setLen to remove it). If <tt class="docutils literal"><span class="pre">collapseDotDot</span></tt> then also delete <tt class="docutils literal"><span class="pre">foo/.. pairs</span></tt> which can alter the behavior of paths in the presence of symbolic links to directories.
    
  </dd>
</div>

</div>
<div id="splitPathName-procs-all">
  <div id="splitPathName,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#splitPathName%2Cstring"><span class="Identifier">splitPathName</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">shortestExt</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">tuple</span><span class="Other">[</span>
    <span class="Identifier">dir</span><span class="Other">,</span> <span class="Identifier">name</span><span class="Other">,</span> <span class="Identifier">ext</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">os</span><span class="Operator">.</span><span class="Identifier">splitFile</span></span></tt> but return longest extensions not shortest (unless <tt class="docutils literal"><span class="pre"><span class="Identifier">shortestExt</span></span></tt>).  E.g. <tt class="docutils literal"><span class="pre"><span class="StringLit">&quot;/a/b/c.tar.gz&quot;</span></span></tt> =&gt; <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="StringLit">&quot;/a/b&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;c&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;.tar.gz&quot;</span><span class="Punctuation">)</span></span></tt>, but with <tt class="docutils literal"><span class="pre"><span class="Identifier">shortest</span></span></tt> would be <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="StringLit">&quot;/a/b&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;c.tar&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;.gz&quot;</span><span class="Punctuation">)</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="touch-procs-all">
  <div id="touch,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#touch%2Cstring"><span class="Identifier">touch</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
                           <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Create <tt class="docutils literal"><span class="pre"><span class="Identifier">path</span></span></tt> or update its timestamp to the present - if possible.
    
  </dd>
</div>

</div>
<div id="uRd-procs-all">
  <div id="uRd,File,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#uRd%2CFile%2CT"><span class="Identifier">uRd</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">ob</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    Unlocked read flat object <tt class="docutils literal"><span class="pre"><span class="Identifier">ob</span></span></tt> from <tt class="docutils literal"><span class="pre"><span class="Identifier">File</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="ureadBuffer-procs-all">
  <div id="ureadBuffer,File,pointer,Natural">
  <dt><pre><span class="Keyword">proc</span> <a href="#ureadBuffer%2CFile%2Cpointer%2CNatural"><span class="Identifier">ureadBuffer</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">buffer</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="urite-procs-all">
  <div id="urite,File,varargs[string,]">
  <dt><pre><span class="Keyword">proc</span> <a href="#urite%2CFile%2Cvarargs%5Bstring%2C%5D"><span class="Identifier">urite</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Other">]</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Unlocked (i.e. single threaded) libc <tt class="docutils literal"><span class="pre"><span class="Identifier">write</span></span></tt> (maybe Linux-only).
    
  </dd>
</div>
<div id="urite,File,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#urite%2CFile%2Cstring"><span class="Identifier">urite</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                                 <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Unlocked (i.e. single threaded) libc <tt class="docutils literal"><span class="pre"><span class="Identifier">write</span></span></tt> (maybe Linux-only).
    
  </dd>
</div>
<div id="urite,File,string,HSlice[A,B]">
  <dt><pre><span class="Keyword">proc</span> <a href="#urite%2CFile%2Cstring%2CHSlice%5BA%2CB%5D"><span class="Identifier">urite</span></a><span class="Other">[</span><span class="Identifier">A</span><span class="Other">,</span> <span class="Identifier">B</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">str</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">HSlice</span><span class="Other">[</span><span class="Identifier">A</span><span class="Other">,</span> <span class="Identifier">B</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="uriteBuffer-procs-all">
  <div id="uriteBuffer,File,pointer,Natural">
  <dt><pre><span class="Keyword">proc</span> <a href="#uriteBuffer%2CFile%2Cpointer%2CNatural"><span class="Identifier">uriteBuffer</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">buffer</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Unlocked (i.e. single threaded) libc <tt class="docutils literal"><span class="pre"><span class="Identifier">writeBuffer</span></span></tt> (maybe Linux-only).
    
  </dd>
</div>

</div>
<div id="useStdin-procs-all">
  <div id="useStdin,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#useStdin%2Cstring"><span class="Identifier">useStdin</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Decide if <tt class="docutils literal"><span class="pre">path</span></tt> means stdin (&quot;-&quot; or &quot;&quot; and <tt class="docutils literal"><span class="pre">not isatty(stdin)</span></tt>).
    
  </dd>
</div>

</div>
<div id="uWr-procs-all">
  <div id="uWr,File,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#uWr%2CFile%2CT"><span class="Identifier">uWr</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">ob</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    Unlocked write flat object <tt class="docutils literal"><span class="pre"><span class="Identifier">ob</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">File</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="walkPatSorted-procs-all">
  <div id="walkPatSorted,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#walkPatSorted%2Cstring"><span class="Identifier">walkPatSorted</span></a><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadDirEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    This is a glob/filename generation operation but returning a sorted <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span></span></tt> the way most Unix shells would.
    
  </dd>
</div>

</div>
<div id="wr-procs-all">
  <div id="wr,cint,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#wr%2Ccint%2CT"><span class="Identifier">wr</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">ob</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;use `wrOb`&quot;</span></span>.}</pre></dt>
  <dd>
    <div class="deprecation-message">
  <b>Deprecated:</b> use `wrOb`
</div>

    
    
  </dd>
</div>

</div>
<div id="wr0term-procs-all">
  <div id="wr0term,cint,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#wr0term%2Ccint%2Cstring"><span class="Identifier">wr0term</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> as a NUL-terminated string to <tt class="docutils literal"><span class="pre"><span class="Identifier">fd</span></span></tt>.
    
  </dd>
</div>

</div>
<div id="write-procs-all">
  <div id="write,cint,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#write%2Ccint%2Cstring"><span class="Identifier">write</span></a><span class="Other">(</span><span class="Identifier">fh</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write a Nim string to a file descriptor
    
  </dd>
</div>

</div>
<div id="writeContAddrTempFile-procs-all">
  <div id="writeContAddrTempFile,string,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeContAddrTempFile%2Cstring%2Cstring%2Cstring"><span class="Identifier">writeContAddrTempFile</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">,</span> <span class="Identifier">extension</span><span class="Other">,</span> <span class="Identifier">content</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteDirEffect</span><span class="Other">,</span> <span class="Identifier">ReadDirEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    For <tt class="docutils literal"><span class="pre"><span class="Identifier">path</span></span></tt> &quot;/tmp/x/y/z/fooXXXX&quot; and <tt class="docutils literal"><span class="pre"><span class="Identifier">extension</span></span></tt> &quot;.txt&quot;, create &quot;/tmp/x/y/z&quot; if needed &amp; write <tt class="docutils literal"><span class="pre"><span class="Identifier">content</span></span></tt> to &quot;fooHASH.txt&quot; with HASH = a hash(content).
    
  </dd>
</div>

</div>
<div id="writeNumberToFile-procs-all">
  <div id="writeNumberToFile,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeNumberToFile%2Cstring%2Cint"><span class="Identifier">writeNumberToFile</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">num</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Best effort attempt to write a single number to a file.
    
  </dd>
</div>

</div>
<div id="wrLenBuf-procs-all">
  <div id="wrLenBuf,cint,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#wrLenBuf%2Ccint%2Cstring"><span class="Identifier">wrLenBuf</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write <tt class="docutils literal"><span class="pre"><span class="Identifier">int</span></span></tt> length prefix &amp; <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> data atomically (<tt class="docutils literal"><span class="pre"><span class="Identifier">writev</span></span></tt> on Linux).
    
  </dd>
</div>

</div>
<div id="wrLenSeq-procs-all">
  <div id="wrLenSeq,cint,seq[T]">
  <dt><pre><span class="Keyword">proc</span> <a href="#wrLenSeq%2Ccint%2Cseq%5BT%5D"><span class="Identifier">wrLenSeq</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Write <tt class="docutils literal"><span class="pre"><span class="Identifier">int</span></span></tt> length prefixed data of a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span></span></tt> atomically (<tt class="docutils literal"><span class="pre"><span class="Identifier">writev</span></span></tt> on Linux), where <tt class="docutils literal"><span class="pre"><span class="Identifier">T</span></span></tt> are either flat objects or tuples of flat objects (no indirections allowed).
    
  </dd>
</div>

</div>
<div id="wrLine-procs-all">
  <div id="wrLine,cint,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#wrLine%2Ccint%2Cstring"><span class="Identifier">wrLine</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> &amp; then a single newline atomically (<tt class="docutils literal"><span class="pre"><span class="Identifier">writev</span></span></tt> on Linux).
    
  </dd>
</div>

</div>
<div id="wrOb-procs-all">
  <div id="wrOb,cint,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#wrOb%2Ccint%2CT"><span class="Identifier">wrOb</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <span class="Identifier">cint</span><span class="Other">;</span> <span class="Identifier">ob</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Write flat object <tt class="docutils literal"><span class="pre"><span class="Identifier">ob</span></span></tt> to file handle/descriptor <tt class="docutils literal"><span class="pre"><span class="Identifier">fd</span></span></tt>.
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="15">
  <h1><a class="toc-backref" href="#15">Iterators</a></h1>
  <dl class="item">
    <div id="getDelim-iterators-all">
  <div id="getDelim.i,File,char">
  <dt><pre><span class="Keyword">iterator</span> <a href="#getDelim.i%2CFile%2Cchar"><span class="Identifier">getDelim</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">dlm</span><span class="Other">:</span> <span class="Identifier">char</span> <span class="Other">=</span> <span class="CharLit">'\n'</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Efficient file line/record iterator using POSIX getdelim
    
  </dd>
</div>
<div id="getDelim.i,string,char">
  <dt><pre><span class="Keyword">iterator</span> <a href="#getDelim.i%2Cstring%2Cchar"><span class="Identifier">getDelim</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">dlm</span><span class="Other">:</span> <span class="Identifier">char</span> <span class="Other">=</span> <span class="CharLit">'\n'</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">getDelim</span></span></tt> but take a path instead of an open File.
    
  </dd>
</div>

</div>
<div id="getDelims-iterators-all">
  <div id="getDelims.i,File,char">
  <dt><pre><span class="Keyword">iterator</span> <a href="#getDelims.i%2CFile%2Cchar"><span class="Identifier">getDelims</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">;</span> <span class="Identifier">dlm</span><span class="Other">:</span> <span class="Identifier">char</span> <span class="Other">=</span> <span class="CharLit">'\n'</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><span class="Identifier">cstring</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">getDelim</span></span></tt> but yield <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="Keyword">ptr</span><span class="Punctuation">,</span> <span class="Identifier">len</span><span class="Punctuation">)</span></span></tt> not auto-built Nim string. Note that unlike <tt class="docutils literal"><span class="pre"><span class="Identifier">lines</span></span></tt> or <tt class="docutils literal"><span class="pre"><span class="Identifier">getDelim</span></span></tt>, <tt class="docutils literal"><span class="pre"><span class="Identifier">len</span></span></tt> always <em>includes</em> <tt class="docutils literal"><span class="pre"><span class="Identifier">dlm</span></span></tt>.<pre class="listing"><span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">s</span><span class="Punctuation">,</span> <span class="Identifier">n</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">stdin</span><span class="Operator">.</span><span class="Identifier">getDelims</span><span class="Punctuation">:</span> <span class="Comment"># or proc toNimStr(str: cstring, len: int)</span>
  <span class="Keyword">discard</span> <span class="Identifier">toOpenArray</span><span class="Punctuation">[</span><span class="Identifier">char</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Keyword">cast</span><span class="Punctuation">[</span><span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Punctuation">[</span><span class="Identifier">char</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">s</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="DecNumber">0</span><span class="Punctuation">,</span> <span class="Identifier">n</span><span class="Operator">-</span><span class="DecNumber">1</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">len</span></pre>
    
  </dd>
</div>
<div id="getDelims.i,string,char">
  <dt><pre><span class="Keyword">iterator</span> <a href="#getDelims.i%2Cstring%2Cchar"><span class="Identifier">getDelims</span></a><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">dlm</span><span class="Other">:</span> <span class="Identifier">char</span> <span class="Other">=</span> <span class="CharLit">'\n'</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><span class="Identifier">cstring</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">getDelims</span></span></tt> but take a path instead of an open File.
    
  </dd>
</div>

</div>
<div id="getLenPfx-iterators-all">
  <div id="getLenPfx.i,File">
  <dt><pre><span class="Keyword">iterator</span> <a href="#getLenPfx.i%2CFile"><span class="Identifier">getLenPfx</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Identifier">SomeNumber</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">File</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">getDelim</span></span></tt> but &quot;parse&quot; length-prefixed values where a native-endian format binary length prefix is <tt class="docutils literal"><span class="pre"><span class="Identifier">SomeNumber</span></span></tt>.  <em>Caller is responsible for specifying the right numeric type</em>, but format is simple &amp; 8-bit clean.
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="18">
  <h1><a class="toc-backref" href="#18">Templates</a></h1>
  <dl class="item">
    <div id="erru-templates-all">
  <div id="erru.t,varargs[string,]">
  <dt><pre><span class="Keyword">template</span> <a href="#erru.t%2Cvarargs%5Bstring%2C%5D"><span class="Identifier">erru</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">stderr</span><span class="Operator">.</span><span class="Identifier">write</span></span></tt> but using fwrite_unlocked
    
  </dd>
</div>

</div>
<div id="outu-templates-all">
  <div id="outu.t,varargs[string,]">
  <dt><pre><span class="Keyword">template</span> <a href="#outu.t%2Cvarargs%5Bstring%2C%5D"><span class="Identifier">outu</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    Like <tt class="docutils literal"><span class="pre"><span class="Identifier">stdout</span><span class="Operator">.</span><span class="Identifier">write</span></span></tt> but using fwrite_unlocked
    
  </dd>
</div>

</div>
<div id="timeIt-templates-all">
  <div id="timeIt.t,untyped,string,float,int,string,int,untyped">
  <dt><pre><span class="Keyword">template</span> <a href="#timeIt.t%2Cuntyped%2Cstring%2Cfloat%2Cint%2Cstring%2Cint%2Cuntyped"><span class="Identifier">timeIt</span></a><span class="Other">(</span><span class="Identifier">output</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">;</span> <span class="Identifier">label</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">unit</span> <span class="Other">=</span> <span class="FloatNumber">0.000001</span><span class="Other">;</span> <span class="Identifier">places</span> <span class="Other">=</span> <span class="DecNumber">3</span><span class="Other">;</span>
                <span class="Identifier">sep</span> <span class="Other">=</span> <span class="StringLit">&quot;\n&quot;</span><span class="Other">;</span> <span class="Identifier">reps</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
  <dd>
    
    A simple benchmark harness.  <tt class="docutils literal"><span class="pre">output</span></tt> should be something like <tt class="docutils literal"><span class="pre">echo</span></tt> or <tt class="docutils literal"><span class="pre">stdout.write</span></tt> depending on desired formatting.  <tt class="docutils literal"><span class="pre">label</span></tt> comes before time(<tt class="docutils literal"><span class="pre">reps == 1</span></tt>)|time statistics(<tt class="docutils literal"><span class="pre">rep &gt; 1</span></tt>), while <tt class="docutils literal"><span class="pre">sep</span></tt> comes after the numbers.
    
  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2025-08-07 18:33:12 UTC</small>
      </div>
    </div>
  </div>
  
</body>
</html>
